<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quiz - Random 10 of 144</title>
  <style>
    :root{--bg:#f7fafc;--card:#ffffff;--accent:#2563eb;--green:#16a34a;--red:#dc2626}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;margin:0;background:var(--bg);display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}
    .card{width:100%;max-width:900px;background:var(--card);border-radius:12px;box-shadow:0 8px 24px rgba(15,23,42,0.08);padding:20px}
    header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
    h1{font-size:20px;margin:0}
    .meta{color:#6b7280;font-size:14px}
    .question{margin:10px 0 18px}
    .opts{display:grid;gap:10px}
    .opt{border:1px solid #e5e7eb;padding:12px;border-radius:10px;cursor:pointer;display:flex;gap:10px;align-items:flex-start}
    .opt.correct{border-color:var(--green);background:rgba(16,185,129,0.06)}
    .opt.wrong{border-color:var(--red);background:rgba(239,68,68,0.06);opacity:0.95}
    .opt.disabled{cursor:default;opacity:0.9}
    .btn{padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
    .btn.primary{background:var(--accent);color:white}
    .btn.ghost{background:transparent;border:1px solid #e5e7eb}
    footer{display:flex;justify-content:space-between;align-items:center;margin-top:16px}
    .small{font-size:13px;color:#6b7280}
    .result{font-weight:600}
    .review{margin-top:12px}
    .question-review{padding:10px;border-radius:8px;border:1px solid #eef2ff;margin-bottom:8px}
    .checkbox{width:18px;height:18px;border-radius:4px;border:1px solid #cbd5e1;display:inline-block;margin-right:8px;vertical-align:middle}
  </style>
</head>
<body>
  <div class="card" id="app">
    <header>
      <h1>Random Quiz — 10 Questions</h1>
      <div class="meta">Score: <span id="score">0</span> / 10</div>
    </header>

    <main>
      <div id="questionArea">
        <!-- Question content injected here -->
      </div>

      <div style="display:flex;gap:8px;margin-top:14px;">
        <button class="btn primary" id="submitBtn">Submit</button>
        <button class="btn ghost" id="nextBtn" disabled>Next</button>
        <button class="btn ghost" id="restartBtn">Restart (New 10)</button>
      </div>

      <div id="finalArea" style="margin-top:18px;display:none"></div>
    </main>

    <footer>
      <div class="small">10 random questions chosen from your question bank each run.</div>
      <div class="small">Answers show green/red immediately.</div>
    </footer>
  </div>

  <script>
  // --- QUESTIONS: Replace or extend to 144 items. Example set uses the 12 provided; add more as needed. ---
  const QUESTIONS = [
    {
      q: "Which of the following is true?",
      opts: [
        "Extremistan has thin tails while Mediocristan has long tails",
        "Mediocristan distributions are harder to predict than Extremistan",
        "In Extremistan, the total is determined by a few large events with tyranny of the accidental",
        "Extremistan has mild randomness while Mediocristan has wild randomness"
      ],
      answer: [2],
      multiple:false
    },
    {
      q: "What is the key difference between covariate shift and concept shift in distribution shifts?",
      opts:[
        "Covariate shift changes P(y|x) while concept shift changes P(x)",
        "Covariate shift changes P(x) while P(y|x) remains constant, concept shift changes P(y|x) while P(x) remains constant",
        "Both change P(x) and P(y|x) simultaneously",
        "Covariate shift affects labels while concept shift affects features"
      ],
      answer:[1],multiple:false
    },
    {
      q:"In the AugMix methodology, what is the primary advantage over uncontrolled random augmentations?",
      opts:[
        "It uses skip connections to keep images recognizable while applying diverse augmentations",
        "It requires less computational power",
        "It only applies single augmentations instead of multiple",
        "It focuses on geometric transformations only"
      ],answer:[0],multiple:false
    },
    {
      q:"In the context of adversarial attacks, what does \"transferability\" specifically refer to?",
      opts:[
        "The ability to transfer attacks from one domain to another",
        "The ability to transfer defenses across different architectures",
        "The ability to convert white-box attacks to black-box attacks",
        "The ability of adversarial examples crafted for one model to work on other models"
      ],answer:[3],multiple:false
    },
    {q:"Black Swan lies in which of the following categories?",opts:["Known Knowns","Known Unknowns","Unknown Knowns","Unknown Unknowns"],answer:[3],multiple:false},
    {q:"Which of the following are valid approaches for defending against adversarial attacks? (Select all that apply)",opts:["Data augmentation techniques","Adversarial training using adversarial examples during training","Using more data and larger models","Reducing model complexity to avoid overfitting","Adversarial pretraining on larger datasets like ImageNet"],answer:[0,1,2,4],multiple:true},
    {q:"In the RLHF optimization objective, why is a KL-divergence penalty term added to the reward maximization?",opts:["To prevent the model from generating repetitive outputs","To ensure the model stays close to the original pretrained model","To improve the computational efficiency of the training process","To increase the diversity of generated samples"],answer:[1],multiple:false},
    {q:"What does \"reward hacking\" specifically refer to in the context of RLHF?",opts:["Humans providing incorrect feedback to manipulate the system","External attackers compromising the reward model","The reward model overfitting to the training data","The model finding ways to maximize the reward function without achieving the intended behavior"],answer:[3],multiple:false},
    {q:"Identify the equations that can lead to a long-tailed distribution.",opts:["Idea * student * resources * time","Idea * student + resources * time","Idea + student + resource + time","Idea - student * resource - time"],answer:[0],multiple:false},
    {q:"What is the primary advantage of using pairwise comparisons over direct scalar ratings in human feedback collection?",opts:["Pairwise comparisons are faster to collect","They require fewer human annotators","Human judgments are noisy and miscalibrated, but pairwise comparisons are more reliable","They provide more granular feedback information"],answer:[2],multiple:false},
    {q:"What is a major challenge with using a single reward function in RLHF?",opts:["It is computationally expensive to optimize","It cannot represent a diverse society of humans","It requires too much training data","It is unstable during training"],answer:[1],multiple:false},
    {q:"What is Direct Preference Optimization (DPO) equivalent to in the context of RLHF component removal?",opts:["RLHF - Human Feedback","RLHF - Reward Model","RLHF - RL","RLHF - Policy Optimization"],answer:[1],multiple:false}
  ];

  // --- Core logic ---
  const TOTAL_PICK = 10;
  let bank = QUESTIONS.slice();
  // If user has fewer than TOTAL_PICK, use everything
  function pickRandomN(arr, n){
    const copy = arr.slice();
    const picked = [];
    while(picked.length < n && copy.length){
      const i = Math.floor(Math.random()*copy.length);
      picked.push(copy.splice(i,1)[0]);
    }
    return picked;
  }

  let quiz = pickRandomN(bank, Math.min(TOTAL_PICK, bank.length));
  let idx = 0;
  let score = 0;
  const userAnswers = [];

  const qArea = document.getElementById('questionArea');
  const submitBtn = document.getElementById('submitBtn');
  const nextBtn = document.getElementById('nextBtn');
  const restartBtn = document.getElementById('restartBtn');
  const scoreEl = document.getElementById('score');
  const finalArea = document.getElementById('finalArea');

  function renderQuestion(){
    const q = quiz[idx];
    qArea.innerHTML = '';
    finalArea.style.display='none';
    const container = document.createElement('div');
    const meta = document.createElement('div');
    meta.className='small';
    meta.textContent = `Question ${idx+1} of ${quiz.length}`;
    const h = document.createElement('h2');
    h.style.margin='8px 0';
    h.textContent = q.q;
    container.appendChild(meta);
    const qbox = document.createElement('div');
    qbox.className='question';
    qbox.appendChild(h);

    const opts = document.createElement('div');
    opts.className='opts';

    q.opts.forEach((opt,i)=>{
      const el = document.createElement('div');
      el.className='opt';
      el.setAttribute('data-i',i);

      if(q.multiple){
        const cb = document.createElement('input');
        cb.type='checkbox'; cb.style.marginRight='8px';
        cb.id = 'cb-'+i; cb.className='checkbox-input';
        el.appendChild(cb);
        const label = document.createElement('label');
        label.htmlFor = 'cb-'+i;
        label.innerHTML = opt;
        el.appendChild(label);
        // click on whole block toggles
        el.addEventListener('click', (e)=>{
          if(e.target.tagName==='INPUT') return;
          if(el.classList.contains('disabled')) return;
          const cbx = el.querySelector('input');
          cbx.checked = !cbx.checked;
        });
      } else {
        el.textContent = opt;
        el.addEventListener('click', ()=>{
          if(el.classList.contains('disabled')) return;
          // mark selection visually (only temporary until submit)
          // clear previous
          const siblings = opts.querySelectorAll('.opt');
          siblings.forEach(s=>s.style.boxShadow='');
          el.style.boxShadow='inset 0 0 0 2px rgba(37,99,235,0.08)';
          // store selection
          container.setAttribute('data-selected', i);
        });
      }

      opts.appendChild(el);
    });

    qbox.appendChild(opts);
    container.appendChild(qbox);
    qArea.appendChild(container);

    // state buttons
    submitBtn.disabled = false; nextBtn.disabled = true;
  }

  function handleSubmit(){
    const q = quiz[idx];
    const opts = qArea.querySelectorAll('.opt');
    let selectedIndices = [];
    if(q.multiple){
      opts.forEach(o=>{
        const cb = o.querySelector('input');
        if(cb && cb.checked) selectedIndices.push(Number(o.getAttribute('data-i')));
      });
    } else {
      const sel = qArea.querySelector('[data-selected]');
      if(sel){
        selectedIndices = [Number(sel.getAttribute('data-selected'))];
      }
    }

    if(selectedIndices.length===0){
      alert('Please select at least one option before submitting.');
      return;
    }

    // disable further changes
    opts.forEach(o=>o.classList.add('disabled'));
    submitBtn.disabled = true; nextBtn.disabled = false;

    // evaluate correctness
    const correct = q.answer.slice().sort();
    const given = selectedIndices.slice().sort();
    const isCorrect = arraysEqual(correct,given);
    if(isCorrect) score++;
    scoreEl.textContent = score;

    // visual feedback
    opts.forEach(o=>{
      const i = Number(o.getAttribute('data-i'));
      if(q.answer.includes(i)){
        o.classList.add('correct');
      }
      if(given.includes(i) && !q.answer.includes(i)){
        o.classList.add('wrong');
      }
    });

    userAnswers.push({q: q.q, opts: q.opts, correct: q.answer.slice(), given: given.slice(), multiple: q.multiple});

    // if last question, change Next to show final
    if(idx === quiz.length-1){
      nextBtn.textContent = 'Show Result';
    } else {
      nextBtn.textContent = 'Next';
    }
  }

  function handleNext(){
    if(idx < quiz.length-1){
      idx++;
      renderQuestion();
    } else {
      showResult();
    }
  }

  function showResult(){
    qArea.innerHTML='';
    submitBtn.disabled = true; nextBtn.disabled = true;
    finalArea.style.display = 'block';
    finalArea.innerHTML = '';
    const res = document.createElement('div');
    res.innerHTML = `<div style="font-size:18px;font-weight:700;margin-bottom:8px">Your score: ${score} / ${quiz.length}</div>`;
    finalArea.appendChild(res);

    const review = document.createElement('div');
    review.className='review';
    userAnswers.forEach((item, idx)=>{
      const box = document.createElement('div');
      box.className='question-review';
      const title = document.createElement('div');
      title.style.fontWeight='600';
      title.textContent = `Q${idx+1}. ${item.q}`;
      box.appendChild(title);
      const list = document.createElement('div');
      list.style.marginTop='6px';
      item.opts.forEach((o,i)=>{
        const p = document.createElement('div');
        const correct = item.correct.includes(i);
        const chosen = item.given.includes(i);
        p.textContent = `${String.fromCharCode(65+i)}. ${o}` + (correct ? ' (Correct)' : '') + (chosen && !correct ? ' (Your choice — Wrong)' : (chosen && correct ? ' (Your choice — Right)' : ''));
        list.appendChild(p);
      });
      box.appendChild(list);
      review.appendChild(box);
    });
    finalArea.appendChild(review);

    // allow restart
    const restart = document.createElement('div');
    restart.style.marginTop='12px';
    const rbtn = document.createElement('button');
    rbtn.className='btn primary'; rbtn.textContent='Restart with new 10';
    rbtn.addEventListener('click', ()=>{ location.reload(); });
    restart.appendChild(rbtn);
    finalArea.appendChild(restart);
  }

  function arraysEqual(a,b){ if(a.length!==b.length) return false; for(let i=0;i<a.length;i++) if(a[i]!==b[i]) return false; return true; }

  submitBtn.addEventListener('click', handleSubmit);
  nextBtn.addEventListener('click', handleNext);
  restartBtn.addEventListener('click', ()=>{ location.reload(); });

  // initial render
  renderQuestion();
  </script>
</body>
  </html>
